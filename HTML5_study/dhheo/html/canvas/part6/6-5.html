<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>part6-5</title>
    <script type="text/javascript">
        function init() {
            var videoElement = document.getElementById("theVideo");
            videoElement.addEventListener('progress', updateLoadingStatus, false); // video 객체가 비디오의 로딩 과제에 관한 정보를 갱신할 때 발생함.
            videoElement.addEventListener('canplaythrough', playVideo, false); // 비디오 전체를 재생할 만큼 충분히 비디오가 로드되면 발생.

            function updateLoadingStatus(e) {
                var loadingStatus = document.getElementById("loadingStatus");
                /*
                * videoElement.buffered.end(0) : 로드된 바이트 수
                * videoElement.duration : 전체 바이트 수
                * */
                var percentLoaded = parseInt(((videoElement.buffered.end(0)/videoElement.duration)*100));
                loadingStatus.innerHTML = percentLoaded + '%';
            }

            function playVideo() {
                //videoElement.play();
            }
        }
    </script>
</head>
<body onload="init();">
    <div>
        <form>
            Video Size : <input type="range" id="videoSize" min="80" max="1280" step="1" value="320"/>
        </form>
        <br>
    </div>
    <div>
        <video loop controls id="theVideo" preload="auto">
            <source src="http://media.w3.org/2010/05/sintel/trailer.ogv" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'>
            <!--<source src="../../resources/canvas/video/mov_bbb.webm" type='video/webm; codecs="vp8, vorbis"'>
            <source src="../../resources/canvas/video/mov_bbb.ogg" type='video/ogg; codecs="theora, vorbis"'>-->
        </video>
    </div>
    <div id="loadingStatus">
        0%
    </div>
</body>
</html>